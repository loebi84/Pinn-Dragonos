- name: ðŸ§  DragonOS-Link dynamisch holen
  id: get-dragonos
  run: |
    echo "ðŸ“¡ RSS-Feed wird analysiertâ€¦"
    feed_url="https://sourceforge.net/projects/dragonos/rss?path=/DragonOS_Pi64"
    latest_url=$(curl -s "$feed_url" | grep -oP 'url="\Khttps://.*?\.img\.xz(?=")' | head -n 1)

    if [ -z "$latest_url" ]; then
      echo "âŒ Kein Download-Link gefunden!"
      exit 1
    fi

    echo "âœ… Gefundener Link: $latest_url"
    echo "dragonos_url=$latest_url" >> $GITHUB_OUTPUT

- name: ðŸ“¥ DragonOS herunterladen
  run: |
    echo "ðŸ“¦ Lade DragonOS von: ${{ steps.get-dragonos.outputs.dragonos_url }}"
    wget -O dragonos.img.xz "${{ steps.get-dragonos.outputs.dragonos_url }}"